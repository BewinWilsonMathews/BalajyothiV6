<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ed-Bradley Memorial Elocution Contest-2025</title>
<style>
  :root{
    --primary: #4f46e5;
    --secondary: #CD2028; /* your requested secondary color */
    --bg: #f9fbff;
    --card: #ffffff;
    --muted-border: #d6d6d6;
    --radius: 10px;
    --muted-text: #5b6a7a;
  }

  /* Page */
  body {
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: var(--bg);
    margin: 0;
    padding: 24px;
    -webkit-font-smoothing:antialiased;
    color: #26364a;
  }

  /* Card */
  .container {
    max-width: 820px;
    margin: 18px auto;
    background: var(--card);
    border-radius: var(--radius);
    padding: 28px;
    box-shadow: 0 6px 18px rgba(14, 30, 37, 0.08);
    position: relative;
    border: 2px solid transparent;
  }

  /* Logo header */
  .logo-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
  }
  .logo-header img {
    height: 64px;
    width: auto;
    object-fit: contain;
    border-radius: 6px;
  }

  /* Titles */
  h2 {
    text-align: center;
    margin: 8px 0 6px 0;
    color: #26364a;
    font-size: 20px;
    font-weight: 700;
  }
  h3 {
    text-align: center;
    margin: 0 0 14px 0;
    color: var(--primary);
    font-weight: 600;
    font-size: 16px;
  }

  /* Guidelines */
  .guidelines {
    margin: 12px 0 18px 0;
    padding: 16px 18px;
    border-radius: 10px;
    background: #fff;
    border-left: 6px solid var(--secondary);
    box-shadow: 0 3px 10px rgba(14,30,37,0.03);
  }
  .guidelines h4 {
    margin: 0 0 8px 0;
    font-size: 16px;
    color: #1f3344;
  }
  .guidelines p, .guidelines li {
    margin: 6px 0;
    color: var(--muted-text);
    line-height: 1.45;
    font-size: 14px;
  }
  .guidelines ul { padding-left: 18px; margin: 6px 0; }
  .guidelines .highlight {
    color: var(--secondary);
    font-weight: 700;
  }
  .guidelines .small {
    font-size: 13px;
    color: #6b7784;
  }
  .guidelines .phase {
    margin-top: 10px;
  }
  .date {
    color: var(--secondary);
    font-weight: 700;
  }

  /* Form layout */
  form { width: 100%; margin-top: 6px; }
  .form-grid { display: grid; grid-template-columns: 1fr; gap: 0; }
  .form-group {
    margin-bottom: 14px;
  }

  label {
    display: block;
    font-weight: 700; /* bold labels */
    margin-bottom: 6px;
    color: #2b3a4a;
    font-size: 14px;
  }

  input[type="text"],
  input[type="tel"],
  input[type="file"],
  select {
    width: 100%;
    padding: 10px 12px;
    border-radius: 8px;
    border: 2px solid var(--muted-border);
    font-size: 15px;
    box-sizing: border-box;
    transition: border-color 150ms ease, box-shadow 150ms ease;
    background: #fff;
  }

  /* For the file input to look nicer on some browsers */
  input[type="file"] {
    padding: 8px 10px;
  }

  input:focus,
  select:focus,
  input[type="file"]:focus {
    outline: none;
    border-color: var(--secondary); /* accent on focus */
    box-shadow: 0 0 0 4px rgba(205,32,40,0.06);
  }

  /* Radio groups */
  .radio-group {
    display: flex;
    gap: 18px;
    align-items: center;
    margin-top: 6px;
  }
  .radio-group label { font-weight: 600; display: flex; align-items:center; gap:8px; }

  /* Category select little spacing */
  select { -webkit-appearance: none; appearance: none; }

  /* Button */
  button {
    display: inline-block;
    width: 100%;
    padding: 12px 14px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(90deg,var(--primary), #6b2ff2);
    color: #fff;
    font-weight: 700;
    font-size: 16px;
    margin-top: 10px;
    cursor: pointer;
  }
  button:hover { filter: brightness(0.95); }

  /* Small helper / accent lines */
  .accent {
    height: 4px;
    width: 64px;
    background: var(--secondary);
    border-radius: 6px;
    margin: 10px auto 18px auto;
  }

  /* small helper text */
  .helper {
    font-size: 13px;
    color: #6b7784;
    margin-top: 6px;
  }

  /* Responsive logos - shrink on small screens */
  @media (max-width: 820px) {
    .logo-header img { height: 56px; }
    .container { padding: 18px; }
  }
  @media (max-width: 520px) {
    .logo-header img { height: 46px; }
    h2 { font-size: 18px; }
  }
</style>
</head>
<body>
  <div class="container">
    <!-- Logo Header -->
    <div class="logo-header">
      <img src="images/Balajyothi.jpg" alt="Balajyothi Logo">   <!-- replace path if needed -->
      <img src="images/Foundation Logo.jpg" alt="Foundation Logo"> <!-- replace path if needed -->
    </div>

    <h2>Rev. Dr. Edward Bradley Memorial Elocution Contest-2025</h2>
        <h3>By ESAF Balajyothi Club</h3>

    <!-- GUIDELINES: placed directly under the title -->
    <div class="guidelines" aria-labelledby="guidelinesTitle">
      <h4 id="guidelinesTitle">Contest Guidelines</h4>

      <p class="small"><strong>Eligibility:</strong> <span class="highlight">Participant must be a member of ESAF Balajyothi Club.</span></p>

      <p><strong>Category:</strong></p>
      <ul>
        <li><strong>Junior</strong> – Grades 5, 6, 7</li>
        <li><strong>Senior</strong> – Grades 8, 9, 10</li>
      </ul>

      <p><strong>Medium of contest:</strong> Malayalam (Kerala), Tamil (Tamil Nadu)</p>

      <div class="phase">
        <p><strong>Selection Process</strong></p>
        <ol>
          <li>
            <strong>Preliminary Round (Virtual):</strong>
            Submit a <strong>5-minute video recording</strong> of the speech (Malayalam/Tamil) by <span class="date">November 5</span>.
            Top scorers will be shortlisted for the final.
          </li>
          <li style="margin-top:8px;">
            <strong>Final Round (Offline):</strong>
            Shortlisted candidates must attend the final on <span class="date">November 15</span> at <strong>Mannuthy, Thrissur (Kerala), Salem (Tamil Nadu)</strong>.
          </li>
        </ol>
      </div>

      <p class="small" style="margin-top:8px;">Note: Ensure video length is approximately 5 minutes and file format is a common MP4/MOV for easier processing.</p>
    </div>

<div class="guidelines" style="margin-top: 10px;">
  <h4>Evaluation Process</h4>
  <p>
    An expert panel will evaluate the entries received on or before 
    <span class="date">5th November</span> and finalise the participants who qualify 
    for the final round. Winners from each district will participate in the 
    <strong>State-level competition</strong>, held offline, and evaluated by a special jury.
  </p>

  <h4 style="margin-top: 14px;">Prize for Winners</h4>
  <p>
    State-level <strong>Ed-Bradley Memorial Elocution Competition</strong> winners 
    will be crowned with <strong>cash prizes, mementos,</strong> and <strong>certificates</strong>.
  </p>
  <ul style="margin-top: 6px;">
    <li><strong>First Prize:</strong> ₹5,000/-</li>
    <li><strong>Second Prize:</strong> ₹3,000/-</li>
    <li><strong>Third Prize:</strong> ₹2,000/-</li>
  </ul>
</div>

    <div class="accent" aria-hidden="true"></div>


    <form id="submissionForm" autocomplete="on">
      <div class="form-grid">
        <div class="form-group">
          <label for="student_name">Name of Student</label>
          <input id="student_name" name="student_name" type="text" placeholder="Enter student name" required>
        </div>

        <div class="form-group">
          <label>I am a Balajyothi member</label>
          <div class="radio-group" role="radiogroup" aria-label="Balajyothi member">
            <label><input type="radio" name="member" value="Yes" required> Yes</label>
            <label><input type="radio" name="member" value="No" required> No</label>
          </div>
        </div>

        <div class="form-group">
          <label for="club_name">Name of Balajyothi Club</label>
          <input id="club_name" name="club_name" type="text" placeholder="Enter club name (if applicable)">
        </div>

        <div class="form-group">
          <label>Gender</label>
          <div class="radio-group" role="radiogroup" aria-label="Gender">
            <label><input type="radio" name="gender" value="Male" required> Male</label>
            <label><input type="radio" name="gender" value="Female" required> Female</label>
          </div>
        </div>

        <div class="form-group">
          <label for="class_studying">Class Studying</label>
          <input id="class_studying" name="class" type="text" placeholder="e.g., 5 or 10 (Enter numeric class)" required>
        </div>

        <div class="form-group">
          <label for="category">Category</label>
          <select id="category" name="category" required>
            <option value="">-- Select category --</option>
            <option value="Junior">Junior (5-7)</option>
            <option value="Senior">Senior (8-10)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="school">Name of School</label>
          <input id="school" name="school" type="text" placeholder="Enter school name" required>
        </div>

        <div class="form-group">
          <label for="residence">Place of Residence</label>
          <input id="residence" name="residence" type="text" placeholder="Enter village / town / city" required>
        </div>

        <div class="form-group">
          <label for="state">Name of State</label>
          <select id="state" name="state" required>
            <option value="">-- Select State --</option>
            <option value="Kerala">Kerala</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
          </select>
        </div>

        <div class="form-group">
          <label for="district">Name of District</label>
          <select id="district" name="district" required>
            <option value="">-- Select District --</option>
          </select>
        </div>

        <div class="form-group">
          <label for="contact1">Contact Number 1</label>
          <input id="contact1" name="contact1" type="tel" pattern="[0-9]{10}" placeholder="10-digit phone number" required>
        </div>

        <div class="form-group">
          <label for="contact2">Contact Number 2</label>
          <input id="contact2" name="contact2" type="tel" pattern="[0-9]{10}" placeholder="Alternate number (optional)">
        </div>

        <!-- NEW: Google Drive link field and instructions -->
        <div class="form-group">
          <label for="video_link">Google Drive Video Link (paste link here)</label>
          <input id="video_link" name="video_link" type="text" placeholder="https://drive.google.com/..." required>
          <p class="helper">
            <strong>How to get a shareable Drive link:</strong>
            <ol style="margin:6px 0 0 18px; color:var(--muted-text); font-size:13px;">
              <li>Upload your video to Google Drive (MP4/MOV recommended).</li>
              <li>Right-click the file → <em>Get link</em> → Change access to <strong>"Anyone with the link"</strong> (or "Anyone with the link can view").</li>
              <li>Copy the link and paste it above.</li>
            </ol>
          </p>
          <label style="margin-top:8px; font-weight:600;">
            <input id="drive_confirm" type="checkbox" required/> &nbsp; I confirm that the link above is shareable ("Anyone with the link can view")
          </label>
        </div>

      </div>

      <button type="submit">Submit</button>
    </form>
  </div>

<script type="module">
  // ---- 0) Firebase config (use exactly what console shows) ----
  const firebaseConfig = {
    apiKey: "AIzaSyAsQsDsbTp_UB6qyDgxQLwhVBs9UrCuors",
    authDomain: "elocution-form.firebaseapp.com",
    projectId: "elocution-form",
    storageBucket: "elocution-form.firebasestorage.app",
    messagingSenderId: "936475111029",
    appId: "1:936475111029:web:33e0ddff32913e0f2e923c"
  };

  // ---- 1) Import only app, storage and firestore (no auth) ----
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getStorage, ref as storageRef, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  // ---- 2) Init Firebase services ----
  const app = initializeApp(firebaseConfig);
  const storage = getStorage(app);
  const db = getFirestore(app);

  // ---- 3) Keep your state/district logic (unchanged) ----
  const districtSelect = document.getElementById("district");
  const stateSelect = document.getElementById("state");

  const districts = {
    "Kerala": [
      "Thiruvananthapuram", "Kollam", "Pathanamthitta", "Alappuzha",
      "Kottayam", "Idukki", "Ernakulam", "Thrissur", "Palakkad",
      "Malappuram", "Kozhikode", "Wayanad", "Kannur", "Kasaragod"
    ],
    "Tamil Nadu": [
      "Chennai", "Coimbatore", "Madurai", "Tiruchirappalli", "Salem",
      "Erode", "Thanjavur", "Tirunelveli", "Vellore", "Thoothukudi",
      "Dindigul", "Namakkal", "Virudhunagar", "Krishnagiri", "Dharmapuri"
    ]
  };

  stateSelect.addEventListener("change", () => {
    const selectedState = stateSelect.value;
    districtSelect.innerHTML = '<option value="">-- Select District --</option>';
    if (selectedState && districts[selectedState]) {
      districts[selectedState].forEach(dist => {
        const opt = document.createElement("option");
        opt.value = dist;
        opt.textContent = dist;
        districtSelect.appendChild(opt);
      });
    }
  });

  // ---- 4) Form submit logic (SAVE drive link to Firestore) ----
  const form = document.getElementById("submissionForm");
  const submitBtn = form.querySelector('button[type="submit"]');
  const driveConfirmEl = document.getElementById("drive_confirm");
  const videoLinkEl = document.getElementById("video_link");

  function setButtonState(text, disabled = false) {
    submitBtn.textContent = text;
    submitBtn.disabled = disabled;
  }

  // basic link check: presence and contains drive.google or docs.google or shortened goo.gl/drive link
  function looksLikeDriveLink(url) {
    if (!url) return false;
    try {
      const u = new URL(url);
      return u.hostname.includes("drive.google.com") || u.hostname.includes("docs.google.com") || url.includes("drive.google");
    } catch (err) {
      return false;
    }
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    setButtonState("Saving...", true);

    try {
      // Collect form field values
      const name = document.getElementById("student_name").value.trim();
      const contact1 = document.getElementById("contact1").value.trim();
      const contact2 = document.getElementById("contact2").value.trim();
      const club = document.getElementById("club_name").value.trim();
      const genderEl = form.querySelector('input[name="gender"]:checked');
      const gender = genderEl ? genderEl.value : "";
      const memberEl = form.querySelector('input[name="member"]:checked');
      const member = memberEl ? memberEl.value : "";
      const cls = document.getElementById("class_studying").value.trim();
      const category = document.getElementById("category").value;
      const school = document.getElementById("school").value.trim();
      const residence = document.getElementById("residence").value.trim();
      const state = document.getElementById("state").value;
      const district = document.getElementById("district").value;

// NEW: video link validation (REQUIRED)
const video_link = videoLinkEl.value.trim();
const drive_confirm = !!driveConfirmEl.checked;

// 1) Require presence
if (!video_link) {
  alert("Please paste your Google Drive video link before submitting.");
  setButtonState("Submit", false);
  return;
}

// 2) Basic shape check
if (!looksLikeDriveLink(video_link)) {
  alert("Please paste a valid Google Drive link (it should contain drive.google.com or docs.google.com).");
  setButtonState("Submit", false);
  return;
}

// 3) Require explicit confirmation checkbox
if (!drive_confirm) {
  alert("Please confirm that you have set the Drive file's sharing to 'Anyone with the link can view'.");
  setButtonState("Submit", false);
  return;
}


      // Save form data (including drive link) to Firestore
      await addDoc(collection(db, "submissions"), {
        student_name: name,
        member: member,
        club_name: club,
        gender: gender,
        class: cls,
        category: category,
        school: school,
        residence: residence,
        state: state,
        district: district,
        contact1: contact1,
        contact2: contact2,
        video_link: video_link || null,
        drive_link_confirmed: drive_confirm,
        created_at: serverTimestamp()
      });

      alert("Form submitted successfully! Your data has been saved.");
      form.reset();
      setButtonState("Submit", false);

    } catch (err) {
      console.error("Error saving data:", err);
      alert("Error saving your data. Please check console for details.");
      setButtonState("Submit", false);
    }
  });
</script>

</body>
</html>



